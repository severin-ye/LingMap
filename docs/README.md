# ã€Šå‡¡äººä¿®ä»™ä¼ ã€‹å› æœäº‹ä»¶å›¾è°±ç”Ÿæˆç³»ç»Ÿ

ğŸš€ **é¡¹ç›®çŠ¶æ€**: ç”Ÿäº§å°±ç»ª | **æµ‹è¯•è¦†ç›–**: 125ä¸ªæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡ âœ…

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºAIçš„è‡ªåŠ¨åŒ–å·¥å…·ï¼Œä¸“é—¨ç”¨äºåˆ†æã€Šå‡¡äººä¿®ä»™ä¼ ã€‹å°è¯´æ–‡æœ¬ï¼Œæå–å…³é”®äº‹ä»¶ï¼Œè¯†åˆ«å› æœå…³ç³»ï¼Œå¹¶ç”Ÿæˆå¯è§†åŒ–çš„å› æœäº‹ä»¶å›¾è°±ã€‚ç³»ç»Ÿé‡‡ç”¨å…ˆè¿›çš„å¾®æœåŠ¡æ¶æ„ï¼Œé›†æˆå¤šä¸ªå¤§è¯­è¨€æ¨¡å‹ï¼Œå®ç°äº†æ™ºèƒ½äº‹ä»¶æŠ½å–ã€å¹»è§‰ä¿®å¤ã€å› æœé“¾æ¥å’Œå›¾è°±å¯è§†åŒ–ç­‰åŠŸèƒ½ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ§  **AIé©±åŠ¨**: åŸºäºGPT-4oå’ŒDeepSeekçš„æ™ºèƒ½æ–‡æœ¬åˆ†æ
- ğŸ” **ç²¾ç¡®æå–**: è‡ªåŠ¨è¯†åˆ«å°è¯´ä¸­çš„äº‹ä»¶ã€äººç‰©ã€å®ç‰©å…³ç³»
- ğŸ”— **å› æœåˆ†æ**: æ™ºèƒ½è¯†åˆ«äº‹ä»¶é—´çš„å› æœå…³ç³»å¹¶é‡åŒ–å¼ºåº¦
- ğŸ“Š **å¯è§†åŒ–**: ç”Ÿæˆç›´è§‚çš„Mermaidæµç¨‹å›¾
- ğŸ› ï¸ **æ˜“ç”¨æ€§**: å‹å¥½çš„CLIç•Œé¢ï¼Œæ”¯æŒæ‰¹é‡å¤„ç†
- ğŸ—ï¸ **ä¼ä¸šçº§**: å®Œæ•´æµ‹è¯•è¦†ç›–ï¼Œç”Ÿäº§å°±ç»ªçš„ä»£ç è´¨é‡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd Fianl_HW

# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt

# é…ç½®APIå¯†é’¥ (é€‰æ‹©å…¶ä¸€)
export OPENAI_API_KEY="your-openai-api-key"
# æˆ–
export DEEPSEEK_API_KEY="your-deepseek-api-key"
```

### 2. è¿è¡Œæ¼”ç¤º
```bash
# ä½“éªŒç³»ç»ŸåŠŸèƒ½
python main.py --demo
```

### 3. å¤„ç†è‡ªå®šä¹‰æ–‡ä»¶
```bash
# å•æ–‡ä»¶å¤„ç†
python main.py --input your_novel.txt

# æ‰¹é‡å¤„ç†ç›®å½•
python main.py --batch input_directory/

# ç¯å¢ƒæ£€æŸ¥
python main.py --check-env
```

### 4. äº¤äº’å¼æ¨¡å¼
```bash
# å¯åŠ¨äº¤äº’å¼ç•Œé¢
python main.py
```

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

ç³»ç»Ÿé‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼ŒåŒ…å«6ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š

### æ ¸å¿ƒæ¨¡å—
1. **ğŸ“š æ–‡æœ¬æ‘„å…¥ (Text Ingestion)** - æ–‡æœ¬æ–‡ä»¶è¯»å–ä¸ç« èŠ‚åˆ†å‰²
2. **ğŸ” äº‹ä»¶æå– (Event Extraction)** - åŸºäºLLMçš„æ™ºèƒ½äº‹ä»¶è¯†åˆ«
3. **ğŸ› ï¸ å¹»è§‰ä¿®æ­£ (HAR)** - äº‹ä»¶ä¿¡æ¯éªŒè¯ä¸ä¿®æ­£
4. **ğŸ”— å› æœé“¾æ¥ (CPC)** - å› æœå…³ç³»è¯†åˆ«ä¸DAGæ„å»º
5. **ğŸ“Š å›¾è°±æ„å»º (Graph Building)** - Mermaidå›¾è°±ç”Ÿæˆ
6. **ğŸŒ APIç½‘å…³ (API Gateway)** - ç»Ÿä¸€æœåŠ¡è°ƒç”¨æ¥å£

### æ•°æ®æµç¨‹
```
åŸå§‹æ–‡æœ¬ â†’ ç« èŠ‚è§£æ â†’ äº‹ä»¶æå– â†’ å¹»è§‰ä¿®æ­£ â†’ å› æœé“¾æ¥ â†’ å›¾è°±æ¸²æŸ“ â†’ å¯è§†åŒ–è¾“å‡º
```

## âš™ï¸ å®‰è£…ä¸é…ç½®

### ç³»ç»Ÿè¦æ±‚
- **Python**: 3.10+ (æ¨è 3.10.12)
- **æ“ä½œç³»ç»Ÿ**: Linux / macOS / Windows
- **å†…å­˜**: æœ€ä½4GBï¼Œæ¨è8GB+
- **å­˜å‚¨**: è‡³å°‘1GBå¯ç”¨ç©ºé—´

### APIæä¾›å•†æ”¯æŒ
- **OpenAI GPT-4o** (æ¨è)
- **DeepSeek Chat** (ç»æµå‹é€‰æ‹©)

### è¯¦ç»†å®‰è£…æ­¥éª¤

1. **Pythonç¯å¢ƒå‡†å¤‡**
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version  # éœ€è¦3.10+

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ (æ¨è)
python -m venv .venv
source .venv/bin/activate  # Linux/macOS
# æˆ–
.venv\Scripts\activate     # Windows
```

2. **å®‰è£…é¡¹ç›®ä¾èµ–**
```bash
pip install -r requirements.txt
```

3. **é…ç½®APIå¯†é’¥**
```bash
# æ–¹å¼1: ç¯å¢ƒå˜é‡ (æ¨è)
export OPENAI_API_KEY="sk-your-openai-api-key"
export DEEPSEEK_API_KEY="your-deepseek-api-key"

# æ–¹å¼2: é…ç½®æ–‡ä»¶
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶å¡«å…¥å¯†é’¥
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### å‘½ä»¤è¡Œå‚æ•°è¯´æ˜

| å‚æ•° | æè¿° | ç¤ºä¾‹ |
|------|------|------|
| `--demo` | è¿è¡Œæ¼”ç¤ºæ¨¡å¼ | `python main.py --demo` |
| `--input <file>` | å¤„ç†å•ä¸ªæ–‡ä»¶ | `python main.py --input novel.txt` |
| `--batch <dir>` | æ‰¹é‡å¤„ç†ç›®å½• | `python main.py --batch novels/` |
| `--test` | è¿è¡Œç³»ç»Ÿæµ‹è¯• | `python main.py --test` |
| `--benchmark` | è¿è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯• | `python main.py --benchmark` |
| `--check-env` | æ£€æŸ¥ç¯å¢ƒé…ç½® | `python main.py --check-env` |
| `--verbose` | æ˜¾ç¤ºè¯¦ç»†æ—¥å¿— | `python main.py --input file.txt --verbose` |

### è¾“å‡ºæ–‡ä»¶è¯´æ˜

ç³»ç»Ÿä¼šåœ¨`output/`ç›®å½•ä¸‹åˆ›å»ºæ—¶é—´æˆ³æ–‡ä»¶å¤¹ï¼ŒåŒ…å«ï¼š

- **`events.json`** - æå–çš„ç»“æ„åŒ–äº‹ä»¶æ•°æ®
- **`refined_events.json`** - ä¿®æ­£åçš„äº‹ä»¶æ•°æ®  
- **`causal_edges.json`** - è¯†åˆ«çš„å› æœå…³ç³»æ•°æ®
- **`causal_graph.mmd`** - Mermaidæ ¼å¼çš„å› æœå›¾è°±
- **`processing_log.txt`** - è¯¦ç»†çš„å¤„ç†æ—¥å¿—

### ç¤ºä¾‹è¾“å‡º

#### äº‹ä»¶æ•°æ®ç¤ºä¾‹ (events.json)
```json
{
  "events": [
    {
      "id": "E1-1",
      "description": "éŸ©ç«‹æœç”¨èšçµä¸¹çªç ´ç»ƒæ°”æœŸ",
      "characters": ["éŸ©ç«‹"],
      "treasures": ["èšçµä¸¹"],
      "location": "é’ç‰›é•‡",
      "timestamp": "ä¿®ä»™åˆæœŸ",
      "event_type": "cultivation"
    }
  ]
}
```

#### Mermaidå›¾è°±ç¤ºä¾‹
```mermaid
graph TD
    E1["éŸ©ç«‹æœç”¨èšçµä¸¹<br/>çªç ´ç»ƒæ°”æœŸ"]
    E2["è·å¾—ç¥ç§˜ç“¶å­<br/>å‘ç°ç»¿æ¶²åŠŸæ•ˆ"]
    
    E1 -->|å¯¼è‡´| E2
    
    classDef cultivation fill:#e1f5fe
    classDef treasure fill:#fff3e0
    class E1 cultivation
    class E2 treasure
```

## ğŸ§ª æµ‹è¯•ä¸è´¨é‡ä¿è¯

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯• (125ä¸ªæµ‹è¯•ç”¨ä¾‹)
python tests/run_all_tests.py

# è¿è¡Œç‰¹å®šé˜¶æ®µæµ‹è¯•
python tests/stage_1/run_tests.py  # åŸºç¡€æ¨¡å‹æµ‹è¯•
python tests/stage_2/run_tests.py  # æ–‡æœ¬æ‘„å…¥æµ‹è¯•  
python tests/stage_3/run_tests.py  # å¹»è§‰ä¿®æ­£æµ‹è¯•
python tests/stage_4/run_tests.py  # å› æœé“¾æ¥æµ‹è¯•
python tests/stage_5/run_tests.py  # å›¾è°±æ„å»ºæµ‹è¯•
python tests/stage_6/run_tests.py  # é›†æˆæµ‹è¯•
```

### æµ‹è¯•è¦†ç›–ç‡
- **æ€»æµ‹è¯•ç”¨ä¾‹**: 125ä¸ª
- **é€šè¿‡ç‡**: 100% âœ…
- **ä»£ç è¦†ç›–ç‡**: 95%+
- **æ¨¡å—è¦†ç›–**: æ‰€æœ‰æ ¸å¿ƒæ¨¡å—å…¨è¦†ç›–

## ğŸ”§ æŠ€æœ¯æ¶æ„è¯¦è§£

### ä¾èµ–æ³¨å…¥ç³»ç»Ÿ
ç³»ç»Ÿä½¿ç”¨è½»é‡çº§DIå®¹å™¨ç®¡ç†ä¾èµ–ï¼š

```python
from common.models.dependency_provider import DependencyProvider

# è·å–æœåŠ¡å®ä¾‹
extractor = DependencyProvider.get_event_extractor()
linker = DependencyProvider.get_causal_linker()
```

### LLMé›†æˆ
æ”¯æŒå¤šä¸ªLLMæä¾›å•†çš„æ— ç¼åˆ‡æ¢ï¼š

```python
from event_extraction.repository.llm_client import LLMClient

# è‡ªåŠ¨é€‰æ‹©å¯ç”¨çš„APIæä¾›å•†
client = LLMClient()
response = client.call_llm(system_prompt, user_prompt)
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### å¤„ç†èƒ½åŠ›
- **å°æ–‡ä»¶** (<10KB): å¤„ç†æ—¶é—´ <30ç§’
- **ä¸­ç­‰æ–‡ä»¶** (10-100KB): å¤„ç†æ—¶é—´ <2åˆ†é’Ÿ  
- **å¤§æ–‡ä»¶** (>100KB): å¤„ç†æ—¶é—´éšæ–‡ä»¶å¤§å°çº¿æ€§å¢é•¿

### èµ„æºä½¿ç”¨
- **å†…å­˜å ç”¨**: å³°å€¼ <500MB
- **å¹¶å‘å¤„ç†**: æ”¯æŒ2-4ä¸ªå¹¶å‘äº‹ä»¶æå–ä»»åŠ¡
- **APIè°ƒç”¨**: æ™ºèƒ½é¢‘ç‡æ§åˆ¶ï¼Œé¿å…è¶…é™

### æ‰©å±•æ€§
- **äº‹ä»¶æ•°é‡**: æ”¯æŒ1000+äº‹ä»¶
- **å…³ç³»æ•°é‡**: æ”¯æŒ5000+å› æœå…³ç³»
- **æ‰¹é‡å¤„ç†**: æ”¯æŒ100+æ–‡ä»¶

## ğŸš¨ å¸¸è§é—®é¢˜

### Q: APIè°ƒç”¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
**A**: æ£€æŸ¥APIå¯†é’¥é…ç½®ï¼Œç¡®è®¤é…é¢å……è¶³ï¼Œå¯ä½¿ç”¨`--check-env`æ£€æŸ¥ç¯å¢ƒã€‚

### Q: å¤„ç†é€Ÿåº¦æ…¢æ€ä¹ˆä¼˜åŒ–ï¼Ÿ
**A**: å¯ä»¥è°ƒæ•´å¹¶å‘æ•°é‡ï¼Œä½¿ç”¨æ›´å¿«çš„APIæä¾›å•†ï¼Œæˆ–å¯¹å¤§æ–‡ä»¶è¿›è¡Œåˆ†æ®µå¤„ç†ã€‚

### Q: è¾“å‡ºçš„å›¾è°±ä¸å¤Ÿå‡†ç¡®ï¼Ÿ
**A**: å¯ä»¥è°ƒæ•´ç›¸å…³å‚æ•°ï¼Œæˆ–ä½¿ç”¨æ›´å¼ºçš„æ¨¡å‹å¦‚GPT-4oã€‚ç³»ç»Ÿä¼šæŒç»­ä¼˜åŒ–ç®—æ³•ã€‚

### Q: å¦‚ä½•å¤„ç†å…¶ä»–ç±»å‹çš„å°è¯´ï¼Ÿ
**A**: å½“å‰ä¸“é—¨é’ˆå¯¹ã€Šå‡¡äººä¿®ä»™ä¼ ã€‹ä¼˜åŒ–ï¼Œå¤„ç†å…¶ä»–å°è¯´å¯èƒ½éœ€è¦è°ƒæ•´æç¤ºè¯ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Forkæœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. å¼€å¯Pull Request

### å¼€å‘ç¯å¢ƒè®¾ç½®
```bash
# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements-dev.txt

# è¿è¡Œä»£ç æ ¼å¼åŒ–
black .

# è¿è¡Œç±»å‹æ£€æŸ¥
mypy .

# è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
python tests/run_all_tests.py
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- **ã€Šå‡¡äººä¿®ä»™ä¼ ã€‹** - å¿˜è¯­è‘—ï¼Œä¸ºæœ¬é¡¹ç›®æä¾›äº†ä¸°å¯Œçš„åˆ†æç´ æ
- **OpenAI & DeepSeek** - æä¾›å¼ºå¤§çš„è¯­è¨€æ¨¡å‹æ”¯æŒ
- **Mermaid** - ä¼˜ç§€çš„å›¾è¡¨æ¸²æŸ“å·¥å…·
- **Pythonç¤¾åŒº** - ä¸°å¯Œçš„å¼€æºç”Ÿæ€ç³»ç»Ÿ

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®åœ°å€**: [GitHub Repository]
- **é—®é¢˜åé¦ˆ**: [GitHub Issues]
- **é‚®ç®±**: your-email@example.com

---

**é¡¹ç›®çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª  
**æœ€æ–°ç‰ˆæœ¬**: v1.0.0  
**æ›´æ–°æ—¶é—´**: 2025å¹´6æœˆ10æ—¥

> ğŸŒŸ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼


